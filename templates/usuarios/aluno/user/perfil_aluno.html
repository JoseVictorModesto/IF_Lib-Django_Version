{% extends 'bases_templates/base/base_perfil.html' %}
{% load static %}
{% block content %}
            
        <div class="opcoes_user_adm">
            <hr class="linha_opcoes_user">
        </div>

        <section class="caixa">
            <div class="caixas_perfil_padrao">
                <div class="titulo_caixa_div">
                    <h1 class="titulo_caixa">Meus Conteúdos Academicos</h1>
                </div>
                <div>
                    <div class="swiper swiper-perfil swiper-conteudos">
                        <div class="swiper-wrapper">
                        {% if conteudo_aluno %}
                        {% for i in conteudo_aluno %}
                            <div class="swiper-slide">
                                <div class="card card_perfil">
                                    {% if i.img_capa_conteudo %}
                                        <div>
                                            <img src="{{ i.img_capa_conteudo.url }}" class="img_card">
                                        </div>
                                    {% else %}
                                        <div>
                                            <img src="{% static '/styles/imagens/img_not_found_lib.png' %}" class="img_card">
                                        </div>
                                    {% endif %}
                                    <div class="base_card">
                                        {% if i.validado %}
                                            <a href="{% url 'vizualizar_cai' i.id %}" class="titulo_card">{{ i.titulo|slice:":35" }}{% if i.titulo|length > 35 %}...{% endif %}</a>
                                        {% else %}
                                            <a href="{% url 'vizualizar_cai_nao_valid' i.id %}" class="titulo_card">{{ i.titulo|slice:":35" }}{% if i.titulo|length > 35 %}...{% endif %}</a>
                                        {% endif %} 
                                        <div class="infor_card">
                                            <h2 class="inst_card">{{ i.instituicao_conteudo }}</h2>
                                            <button class="descricao_card">Descrição...</button>
                                        </div>
                                    </div>
                                    <div class="detalhes_card">
                                        <h2 class="tipo_card"><strong class="card_strong">Tipo</strong> {{ i.tipos_conteudo }}</h2>
                                        <h3 class="tipo_card"><strong class="card_strong">Postado em</strong> {{ i.data_envio|date:'d/m/Y' }}</h3>
                                        <p class="paragrafo_card"><strong class="card_strong">Descrição</strong> {{ i.descricao_conteudo|slice:":260" }}{% if i.descricao_conteudo|length > 260 %}...{% endif %}</p>
                                        <button class="retornar_card">Voltar</button>
                                    </div>
                                </div>
                            </div>
                        {% endfor %}
                        {% else %}
                            <h1 class="msg_caixa_vazia" style="margin-top: 50%;">Nenhum conteúdo disponível.</h1>
                        {% endif %}
                        </div>

                        <div class="swiper-pagination"></div>
                    
                        <div class="swiper-button-prev conteudo-prev"></div>
                        <div class="swiper-button-next conteudo-next"></div>
                    
                        <div class="swiper-scrollbar"></div>
                    </div>
                </div>
                <div class="botoes_caixas">
                    <a href="{% url 'cad_cai' %}" class="opcao_caixa cad_cont"><i class="bi bi-file-earmark-plus"></i> Novo Conteúdo</a>
                    {% if conteudo_aluno %}
                        <a href="{% url 'caixa_conteudos_alunos' %}" class="opcao_caixa"><i class="bi bi-files"></i> Ver Todos</a>
                    {% endif %}
                </div>
            </div>

            <div class="caixas_perfil_padrao">
                <div class="titulo_caixa_div">
                    <h1 class="titulo_caixa">Favoritos</h1>
                </div>
                <div>
                    <div class="swiper swiper-perfil swiper-favoritos">
                        
                        <div class="swiper-wrapper">
                            
                        {% if favoritos or favoritos_ex %}
                        {% for i in favoritos %}
                            <div class="swiper-slide">
                                <div class="card card_perfil">
                                    {% if i.img_capa_conteudo %}
                                        <div>
                                            <img src="{{ i.img_capa_conteudo.url }}" class="img_card">
                                        </div>
                                    {% else %}
                                        <div>
                                            <img src="{% static '/styles/imagens/img_not_found_lib.png' %}" class="img_card">
                                        </div>
                                    {% endif %}
                                    <div class="base_card">
                                        <a href="{% url 'vizualizar_cai' i.id %}" class="titulo_card">{{ i.titulo|slice:":35" }}{% if i.titulo|length > 35 %}...{% endif %}</a> 
                                        <div class="infor_card">
                                            <h2 class="inst_card">{{ i.instituicao_conteudo }}</h2>
                                            <button class="descricao_card">Descrição...</button>
                                        </div>
                                    </div>
                                    <div class="detalhes_card">
                                        <h2 class="tipo_card"><strong class="card_strong">Tipo</strong> {{ i.tipos_conteudo }}</h2>
                                        <h3 class="tipo_card"><strong class="card_strong">Postado em</strong> {{ i.data_envio|date:'d/m/Y' }}</h3>
                                        <p class="paragrafo_card"><strong class="card_strong">Descrição</strong> {{ i.descricao_conteudo|slice:":260" }}{% if i.descricao_conteudo|length > 260 %}...{% endif %}</p>
                                        <button class="retornar_card">Voltar</button>
                                    </div>
                                </div>
                            </div>
                        {% endfor %}

                        {% for i in favoritos_ex %}
                            <div class="swiper-slide">
                                <div class="card card_perfil card_ex">
                                    {% if i.img_capa %}
                                        <div>
                                            <img src="{{ i.img_capa.url }}" class="img_card">
                                        </div>
                                    {% else %}
                                        <div>
                                            <img src="{% static '/styles/imagens/img_not_found_lib_ex.png' %}" class="img_card">
                                        </div>
                                    {% endif %}
                                    <div class="base_card">
                                        <a href="{% url 'vizualizar_ce' i.id %}" class="titulo_card titulo_card_ex">{{ i.titulo|slice:":35" }}{% if i.titulo|length > 35 %}...{% endif %}</a>
                                        <div class="infor_card infor_card_ex"> 
                                            <h2 class="inst_card">EXT</h2>
                                            <button class="descricao_card descricao_card_ex">Descrição...</button>
                                        </div>
                                    </div>
                                    <div class="detalhes_card detalhes_card_ex">
                                        <h2 class="tipo_card"><strong class="card_strong">Tipo</strong> {{ i.tipo_conteudo }}</h2>
                                        <h3 class="tipo_card"><strong class="card_strong">Postado em</strong> {{ i.data_envio|date:'d/m/Y' }}</h3>
                                        <p class="paragrafo_card"><strong class="card_strong">Descrição</strong> {{ i.descricao_conteudo|slice:":260" }}{% if i.descricao_conteudo|length > 260 %}...{% endif %}</p>
                                        <button class="retornar_card retornar_card_ex">Voltar</button>
                                    </div>
                                </div>
                            </div>
                        {% endfor %}
                        {% else %}
                            <h1 class="msg_caixa_vazia" style="margin-top: 50%;">Nenhum conteúdo favorito.</h1>
                        {% endif %}

                        </div>

                        <div class="swiper-pagination"></div>
                    
                        <div class="swiper-button-prev favoritos-prev"></div>
                        <div class="swiper-button-next favoritos-next"></div>
                    
                        <div class="swiper-scrollbar"></div>
                    </div>
                    <div class="botoes_caixas">
                        {% if favoritos or favoritos_ex %}
                            <a href="{% url 'todos_favorito' %}" class="opcao_caixa"><i class="bi bi-files"></i> Ver Todos</a>
                        {% endif %}
                    </div>
                </div>
            </div>
        </section>

    </main>

    {% include 'bases_templates/partials/footer_pag.html' %}

    <script src="{% static '/scripts.js/app.js' %}"></script>

    <script src="https://cdn.jsdelivr.net/npm/swiper@11/swiper-bundle.min.js"></script>
    <script>
        const swiperConteudos = new Swiper('.swiper-conteudos',{ navigation: { nextEl: '.conteudo-next', prevEl: '.conteudo-prev',}, slidesPerView: 1,});
        const swiperFavoritoss = new Swiper('.swiper-favoritos',{ navigation: { nextEl: '.favoritos-next', prevEl: '.favoritos-prev',}, slidesPerView: 1,});
    </script>

{% endblock %}